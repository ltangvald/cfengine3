######################################################################
#
# A simple file with a body reference showing some iteration
#
######################################################################

bundle agent testbundle

{
vars:

  "testlist1" -> "me"   slist  => { "mark", "kyrre", "aeleen" };

######################################################################

files:

       "/path/file5.*" 

            access      => myaccess("$(testlist1)"),
            recurse     => "inf";

}

#########################################################

body access myaccess(var)

{
any::

  mode  => "+077,-02";

  owners => { "mark","siri" };

solaris::

  groups => { "$(var)123", "456", "$(var)567" };

linux::

    #
    # The semantics of this direct substitution $(var)
    # is to assume a simple literal string atoms
    #

  groups => { "mark2", $(var), "$(myint)" };

groups => @(testlist1);

}

#########################################################

bundle server main

{
vars:

 "list" slist => { "192.168.0.4", "myhost.example.com" };

admit:

 "/etc/passwd"   -> @(testbundle.testlist1);
 "/etc/services" -> @(testlist2);

}

