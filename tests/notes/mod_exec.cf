#  Copyright (C) Cfengine AS

#  This file is part of Cfengine 3 - written and maintained by Cfengine AS.

#  This program is free software; you can redistribute it and/or modify it
#  under the terms of the GNU General Public License as published by the
#  Free Software Foundation; version 3.

#  This program is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.

# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA

# To the extent this program is licensed as part of the Enterprise
# versions of Cfengine, the applicable Commerical Open Source License
# (COSL) may apply to this file if you as a licensee so wish it. See
# included file COSL.txt.


bundle agent myscripts()
   {
   # these are local and trusted, and might change objects that
   # are otherwise promised, so this should exec first
  
   commands:

     "/script/command"   

        args        => "-d -v -t" ,
        contain     => sandbox ,
        module      => "true",      # follow protocol
        exec_timeout     => "10",
        transaction => standard;
       # classes     => react("ThisCommand");   # or use $(this)
   }

####################################################################

body containment sandbox

{
useshell => "true";
umask => "077";
exec_owner => "mysql";
exec_group => "daemon";
chdir => "/outputs";
chroot => "/sandbox";
}

####################################################################

body transaction standard

{
ifelapsed => "10";
}

####################################################################

#body classes react(param)
#
#{
#on_change  => { "okclass1", "okclass2" };
#on_failure => { "failclass" };
#on_denied  => { "alertclass1", "alertclass2", "alertclass3" };
#on_timeout => { "somethingwrongg" };
#}