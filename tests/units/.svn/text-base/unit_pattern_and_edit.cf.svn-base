
body common control

{
bundlesequence => {"test"};
}

########################################################

bundle agent test

{

files:

   "/home/(.*)/testfile"

       create    => "true",
       edit_line => AppendIfNoLine("key_$(match.1)");

}

########################################################

bundle edit_line AppendIfNoLine(x)
  {
  insert_lines:

   "Line $(x)" location => "append";
  }

########################################################

body location append

{
before_after => "before";
}
